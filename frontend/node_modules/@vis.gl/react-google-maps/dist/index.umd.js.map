{"version":3,"file":"index.umd.js","sources":["../src/libraries/api-loading-status.ts","../src/libraries/google-maps-api-loader.ts","../src/components/api-provider.tsx","../src/hooks/use-api-loading-status.ts","../src/hooks/use-api-is-loaded.ts","../src/libraries/errors.ts","../src/libraries/use-callback-ref.tsx","../src/components/map/use-internal-camera-state.ts","../src/components/map/use-map-events.ts","../src/libraries/lat-lng-utils.ts","../src/components/map/use-map-options.ts","../src/components/map/use-deckgl-camera-update.ts","../src/components/map/index.tsx","../src/hooks/use-maps-library.ts","../src/components/advanced-marker.tsx","../src/components/info-window.tsx","../src/hooks/use-map.ts","../src/components/map-control.tsx","../src/components/marker.tsx","../src/components/pin.tsx","../src/hooks/autocomplete.ts","../src/libraries/assert-not-null.ts","../src/hooks/directions-service.ts","../src/hooks/street-view-panorama.ts","../src/libraries/limit-tilt-range.ts"],"sourcesContent":["export const APILoadingStatus = {\n  NOT_LOADED: 'NOT_LOADED',\n  LOADING: 'LOADING',\n  LOADED: 'LOADED',\n  FAILED: 'FAILED',\n  AUTH_FAILURE: 'AUTH_FAILURE'\n};\nexport type APILoadingStatus =\n  (typeof APILoadingStatus)[keyof typeof APILoadingStatus];\n","import {APILoadingStatus} from './api-loading-status';\n\nexport type ApiParams = {\n  key: string;\n  v?: string;\n  language?: string;\n  region?: string;\n  libraries?: string;\n  solutionChannel?: string;\n  authReferrerPolicy?: string;\n};\n\n// Declare global maps callback function\ndeclare global {\n  interface Window {\n    __googleMapsCallback__?: () => void;\n    gm_authFailure?: () => void;\n  }\n}\n\nconst MAPS_API_BASE_URL = 'https://maps.googleapis.com/maps/api/js';\n\n/**\n * A GoogleMapsApiLoader to reliably load and unload the Google Maps JavaScript API.\n *\n * The actual loading and unloading is delayed into the microtask queue, to\n * allow using the API in an useEffect hook, without worrying about multiple API loads.\n */\nexport class GoogleMapsApiLoader {\n  public static loadingStatus: APILoadingStatus = APILoadingStatus.NOT_LOADED;\n  public static serializedApiParams?: string;\n\n  /**\n   * Loads the Google Maps API with the specified parameters.\n   * Since the Maps library can only be loaded once per page, this will\n   * produce a warning when called multiple times with different\n   * parameters.\n   *\n   * The returned promise resolves when loading completes\n   * and rejects in case of an error or when the loading was aborted.\n   */\n  static async load(\n    params: ApiParams,\n    onLoadingStatusChange: (status: APILoadingStatus) => void\n  ): Promise<void> {\n    const libraries = params.libraries ? params.libraries.split(',') : [];\n    const serializedParams = this.serializeParams(params);\n\n    // note: if google.maps.importLibrary was defined externally, the params\n    //   will be ignored. If it was defined by a previous call to this\n    //   method, we will check that the key and other parameters have not been\n    //   changed in between calls.\n\n    if (!window.google?.maps?.importLibrary) {\n      this.serializedApiParams = serializedParams;\n      this.initImportLibrary(params, onLoadingStatusChange);\n    } else {\n      // if serializedApiParams isn't defined the library was loaded externally\n      // and we can only assume that went alright.\n      if (!this.serializedApiParams) {\n        this.loadingStatus = APILoadingStatus.LOADED;\n      }\n\n      onLoadingStatusChange(this.loadingStatus);\n    }\n\n    if (\n      this.serializedApiParams &&\n      this.serializedApiParams !== serializedParams\n    ) {\n      console.warn(\n        `The maps API has already been loaded with different ` +\n          `parameters and will not be loaded again. Refresh the page for ` +\n          `new values to have effect.`\n      );\n    }\n\n    for (const lib of ['maps', ...libraries]) {\n      await google.maps.importLibrary(lib);\n    }\n  }\n\n  private static serializeParams(params: ApiParams): string {\n    return [\n      params.v,\n      params.key,\n      params.language,\n      params.region,\n      params.authReferrerPolicy,\n      params.solutionChannel\n    ].join('/');\n  }\n\n  private static initImportLibrary(\n    params: ApiParams,\n    onLoadingStatusChange: (status: APILoadingStatus) => void\n  ) {\n    if (!window.google) window.google = {} as never;\n    if (!window.google.maps) window.google.maps = {} as never;\n\n    if (window.google.maps['importLibrary']) {\n      console.warn('initImportLibrary can only be called once.', params);\n\n      return;\n    }\n\n    let apiPromise: Promise<void> | null = null;\n\n    const loadApi = (library: string) => {\n      if (apiPromise) return apiPromise;\n\n      apiPromise = new Promise((resolve, reject) => {\n        const scriptElement = document.createElement('script');\n        const urlParams = new URLSearchParams();\n\n        for (const [key, value] of Object.entries(params)) {\n          const urlParamName = key.replace(\n            /[A-Z]/g,\n            t => '_' + t[0].toLowerCase()\n          );\n          urlParams.set(urlParamName, value);\n        }\n        urlParams.set('libraries', library);\n        urlParams.set('loading', 'async');\n        urlParams.set('callback', '__googleMapsCallback__');\n\n        scriptElement.async = true;\n        scriptElement.src = MAPS_API_BASE_URL + `?` + urlParams.toString();\n\n        window.__googleMapsCallback__ = () => {\n          this.loadingStatus = APILoadingStatus.LOADED;\n          onLoadingStatusChange(this.loadingStatus);\n          resolve();\n        };\n\n        window.gm_authFailure = () => {\n          this.loadingStatus = APILoadingStatus.AUTH_FAILURE;\n          onLoadingStatusChange(this.loadingStatus);\n        };\n\n        scriptElement.onerror = () => {\n          this.loadingStatus = APILoadingStatus.FAILED;\n          onLoadingStatusChange(this.loadingStatus);\n          reject(new Error('The Google Maps JavaScript API could not load.'));\n        };\n\n        scriptElement.nonce =\n          (document.querySelector('script[nonce]') as HTMLScriptElement)\n            ?.nonce || '';\n\n        this.loadingStatus = APILoadingStatus.LOADING;\n        onLoadingStatusChange(this.loadingStatus);\n        document.head.append(scriptElement);\n      });\n\n      return apiPromise;\n    };\n\n    // for the first load, we declare an importLibrary function that will\n    // be overwritten once the api is loaded.\n    google.maps.importLibrary = libraryName =>\n      loadApi(libraryName).then(() => google.maps.importLibrary(libraryName));\n  }\n}\n","import React, {\n  PropsWithChildren,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useState\n} from 'react';\n\nimport {\n  ApiParams,\n  GoogleMapsApiLoader\n} from '../libraries/google-maps-api-loader';\nimport {APILoadingStatus} from '../libraries/api-loading-status';\n\ntype ImportLibraryFunction = typeof google.maps.importLibrary;\ntype GoogleMapsLibrary = Awaited<ReturnType<ImportLibraryFunction>>;\ntype LoadedLibraries = {[name: string]: GoogleMapsLibrary};\n\nexport interface APIProviderContextValue {\n  status: APILoadingStatus;\n  loadedLibraries: LoadedLibraries;\n  importLibrary: typeof google.maps.importLibrary;\n  mapInstances: Record<string, google.maps.Map>;\n  addMapInstance: (map: google.maps.Map, id?: string) => void;\n  removeMapInstance: (id?: string) => void;\n  clearMapInstances: () => void;\n}\n\nexport const APIProviderContext =\n  React.createContext<APIProviderContextValue | null>(null);\n\nexport type APIProviderProps = {\n  /**\n   * apiKey must be provided to load the Google Maps JavaScript API. To create an API key, see: https://developers.google.com/maps/documentation/javascript/get-api-key\n   * Part of:\n   */\n  apiKey: string;\n  /**\n   * A custom id to reference the script tag can be provided. The default is set to 'google-maps-api'\n   * @default 'google-maps-api'\n   */\n  libraries?: Array<string>;\n  /**\n   * A specific version of the Google Maps JavaScript API can be used.\n   * Read more about versioning: https://developers.google.com/maps/documentation/javascript/versions\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  version?: string;\n  /**\n   * Sets the map to a specific region.\n   * Read more about localizing the Map: https://developers.google.com/maps/documentation/javascript/localization\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  region?: string;\n  /**\n   * Use a specific language for the map.\n   * Read more about localizing the Map: https://developers.google.com/maps/documentation/javascript/localization\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  language?: string;\n  /**\n   * auth_referrer_policy can be set to 'origin'.\n   * Part of: https://developers.google.com/maps/documentation/javascript/url-params\n   */\n  authReferrerPolicy?: string;\n  /**\n   * A function that can be used to execute code after the Google Maps JavaScript API has been loaded.\n   */\n  onLoad?: () => void;\n};\n\n/**\n * local hook to set up the map-instance management context.\n */\nfunction useMapInstances() {\n  const [mapInstances, setMapInstances] = useState<\n    Record<string, google.maps.Map>\n  >({});\n\n  const addMapInstance = (mapInstance: google.maps.Map, id = 'default') => {\n    setMapInstances(instances => ({...instances, [id]: mapInstance}));\n  };\n\n  const removeMapInstance = (id = 'default') => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    setMapInstances(({[id]: _, ...remaining}) => remaining);\n  };\n\n  const clearMapInstances = () => {\n    setMapInstances({});\n  };\n\n  return {mapInstances, addMapInstance, removeMapInstance, clearMapInstances};\n}\n\n/**\n * local hook to handle the loading of the maps API, returns the current loading status\n * @param props\n */\nfunction useGoogleMapsApiLoader(props: APIProviderProps) {\n  const {onLoad, apiKey, version, libraries = [], ...otherApiParams} = props;\n\n  const [status, setStatus] = useState<APILoadingStatus>(\n    GoogleMapsApiLoader.loadingStatus\n  );\n  const [loadedLibraries, addLoadedLibrary] = useReducer(\n    (\n      loadedLibraries: LoadedLibraries,\n      action: {name: keyof LoadedLibraries; value: LoadedLibraries[string]}\n    ) => {\n      return {...loadedLibraries, [action.name]: action.value};\n    },\n    {}\n  );\n\n  const librariesString = useMemo(() => libraries?.join(','), [libraries]);\n  const serializedParams = useMemo(\n    () => JSON.stringify({apiKey, version, ...otherApiParams}),\n    [apiKey, version, otherApiParams]\n  );\n\n  const importLibrary: typeof google.maps.importLibrary = useCallback(\n    async (name: string) => {\n      if (loadedLibraries[name]) {\n        return loadedLibraries[name];\n      }\n\n      if (!google?.maps?.importLibrary) {\n        throw new Error(\n          '[api-provider-internal] importLibrary was called before ' +\n            'google.maps.importLibrary was defined.'\n        );\n      }\n\n      const res = await window.google.maps.importLibrary(name);\n      addLoadedLibrary({name, value: res});\n\n      return res;\n    },\n    [loadedLibraries]\n  );\n\n  useEffect(\n    () => {\n      (async () => {\n        try {\n          const params: ApiParams = {key: apiKey, ...otherApiParams};\n          if (version) params.v = version;\n          if (librariesString?.length > 0) params.libraries = librariesString;\n\n          await GoogleMapsApiLoader.load(params, status => setStatus(status));\n\n          for (const name of ['core', 'maps', ...libraries]) {\n            await importLibrary(name);\n          }\n\n          if (onLoad) {\n            onLoad();\n          }\n        } catch (error) {\n          console.error('<ApiProvider> failed to load Google Maps API', error);\n        }\n      })();\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [apiKey, librariesString, serializedParams]\n  );\n\n  return {\n    status,\n    loadedLibraries,\n    importLibrary\n  };\n}\n\n/**\n * Component to wrap the Google Maps React components and load the Google Maps JavaScript API\n */\nexport const APIProvider = (\n  props: PropsWithChildren<APIProviderProps>\n): ReactElement | null => {\n  const {children, ...loaderProps} = props;\n  const {mapInstances, addMapInstance, removeMapInstance, clearMapInstances} =\n    useMapInstances();\n\n  const {status, loadedLibraries, importLibrary} =\n    useGoogleMapsApiLoader(loaderProps);\n\n  return (\n    <APIProviderContext.Provider\n      value={{\n        mapInstances,\n        addMapInstance,\n        removeMapInstance,\n        clearMapInstances,\n        status,\n        loadedLibraries,\n        importLibrary\n      }}>\n      {children}\n    </APIProviderContext.Provider>\n  );\n};\n","import {useContext} from 'react';\nimport {APIProviderContext} from '../components/api-provider';\nimport {APILoadingStatus} from '../libraries/api-loading-status';\n\nexport function useApiLoadingStatus(): APILoadingStatus {\n  return useContext(APIProviderContext)?.status || APILoadingStatus.NOT_LOADED;\n}\n","import {useApiLoadingStatus} from './use-api-loading-status';\nimport {APILoadingStatus} from '../libraries/api-loading-status';\n/**\n * Hook to check if the Google Maps API is loaded\n */\nexport function useApiIsLoaded(): boolean {\n  const status = useApiLoadingStatus();\n\n  return status === APILoadingStatus.LOADED;\n}\n","const shownMessages = new Set();\n\nexport function logErrorOnce(...args: Parameters<typeof console.error>) {\n  const key = JSON.stringify(args);\n\n  if (!shownMessages.has(key)) {\n    shownMessages.add(key);\n\n    console.error(...args);\n  }\n}\n","import {Ref, useCallback, useState} from 'react';\n\nexport function useCallbackRef<T>() {\n  const [el, setEl] = useState<T | null>(null);\n  const ref = useCallback((value: T) => setEl(value), [setEl]);\n\n  return [el, ref as Ref<T>] as const;\n}\n","import {MutableRefObject, useRef} from 'react';\nimport {MapCameraChangedEvent, MapEvent} from './use-map-events';\n\nexport type InternalCameraState = {\n  center: google.maps.LatLngLiteral;\n  heading: number;\n  tilt: number;\n  zoom: number;\n};\n\nexport type InternalCameraStateRef = MutableRefObject<InternalCameraState>;\n\n/**\n * Creates a mutable ref object to track the last known state of the map camera.\n * This is updated by `trackDispatchedEvent` and used in `useMapOptions`.\n */\nexport function useInternalCameraState(): InternalCameraStateRef {\n  return useRef<InternalCameraState>({\n    center: {lat: 0, lng: 0},\n    heading: 0,\n    tilt: 0,\n    zoom: 0\n  });\n}\n\n/**\n * Records camera data from the last event dispatched to the React application\n * in a mutable `IternalCameraStateRef`.\n * This data can then be used to prevent feeding these values back to the\n * map-instance when a typical \"controlled component\" setup (state variable is\n * fed into and updated by the map).\n */\nexport function trackDispatchedEvent(\n  ev: MapEvent,\n  cameraStateRef: InternalCameraStateRef\n) {\n  const cameraEvent = ev as MapCameraChangedEvent;\n\n  // we're only interested in the camera-events here\n  if (!cameraEvent.detail.center) return;\n  const {center, zoom, heading, tilt} = cameraEvent.detail;\n\n  cameraStateRef.current.center = center;\n  cameraStateRef.current.heading = heading;\n  cameraStateRef.current.tilt = tilt;\n  cameraStateRef.current.zoom = zoom;\n}\n","import {useEffect} from 'react';\nimport {\n  InternalCameraStateRef,\n  trackDispatchedEvent\n} from './use-internal-camera-state';\n\n/**\n * Handlers for all events that could be emitted by map-instances.\n */\nexport type MapEventProps = Partial<{\n  // map view state events\n  onBoundsChanged: (event: MapCameraChangedEvent) => void;\n  onCenterChanged: (event: MapCameraChangedEvent) => void;\n  onHeadingChanged: (event: MapCameraChangedEvent) => void;\n  onTiltChanged: (event: MapCameraChangedEvent) => void;\n  onZoomChanged: (event: MapCameraChangedEvent) => void;\n  onProjectionChanged: (event: MapCameraChangedEvent) => void;\n\n  // mouse / touch / pointer events\n  onClick: (event: MapMouseEvent) => void;\n  onDblclick: (event: MapMouseEvent) => void;\n  onContextmenu: (event: MapMouseEvent) => void;\n  onMousemove: (event: MapMouseEvent) => void;\n  onMouseover: (event: MapMouseEvent) => void;\n  onMouseout: (event: MapMouseEvent) => void;\n  onDrag: (event: MapEvent) => void;\n  onDragend: (event: MapEvent) => void;\n  onDragstart: (event: MapEvent) => void;\n\n  // loading events\n  onTilesLoaded: (event: MapEvent) => void;\n  onIdle: (event: MapEvent) => void;\n\n  // configuration events\n  onIsFractionalZoomEnabledChanged: (event: MapEvent) => void;\n  onMapCapabilitiesChanged: (event: MapEvent) => void;\n  onMapTypeIdChanged: (event: MapEvent) => void;\n  onRenderingTypeChanged: (event: MapEvent) => void;\n}>;\n\n/**\n * Sets up effects to bind event-handlers for all event-props in MapEventProps.\n * @internal\n */\nexport function useMapEvents(\n  map: google.maps.Map | null,\n  cameraStateRef: InternalCameraStateRef,\n  props: MapEventProps\n) {\n  // note: calling a useEffect hook from within a loop is prohibited by the\n  // rules of hooks, but it's ok here since it's unconditional and the number\n  // and order of iterations is always strictly the same.\n  // (see https://legacy.reactjs.org/docs/hooks-rules.html)\n\n  for (const propName of eventPropNames) {\n    // fixme: this cast is essentially a 'trust me, bro' for typescript, but\n    //   a proper solution seems way too complicated right now\n    const handler = props[propName] as (ev: MapEvent) => void;\n    const eventType = propNameToEventType[propName];\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n      if (!map) return;\n      if (!handler) return;\n\n      const listener = google.maps.event.addListener(\n        map,\n        eventType,\n        (ev?: google.maps.MapMouseEvent | google.maps.IconMouseEvent) => {\n          const mapEvent = createMapEvent(eventType, map, ev);\n\n          trackDispatchedEvent(mapEvent, cameraStateRef);\n          handler(mapEvent);\n        }\n      );\n\n      return () => listener.remove();\n    }, [map, cameraStateRef, eventType, handler]);\n  }\n}\n\n/**\n * Create the wrapped map-events used for the event-props.\n * @param type the event type as it is specified to the maps api\n * @param map the map instance the event originates from\n * @param srcEvent the source-event if there is one.\n */\nfunction createMapEvent(\n  type: string,\n  map: google.maps.Map,\n  srcEvent?: google.maps.MapMouseEvent | google.maps.IconMouseEvent\n): MapEvent {\n  const ev: MapEvent = {\n    type,\n    map,\n    detail: {},\n    stoppable: false,\n    stop: () => {}\n  };\n\n  if (cameraEventTypes.includes(type)) {\n    const camEvent = ev as MapCameraChangedEvent;\n\n    const center = map.getCenter();\n    const zoom = map.getZoom();\n    const heading = map.getHeading() || 0;\n    const tilt = map.getTilt() || 0;\n    const bounds = map.getBounds();\n\n    if (!center || !bounds || !Number.isFinite(zoom)) {\n      console.warn(\n        '[createEvent] at least one of the values from the map ' +\n          'returned undefined. This is not expected to happen. Please ' +\n          'report an issue at https://github.com/visgl/react-google-maps/issues/new'\n      );\n    }\n\n    camEvent.detail = {\n      center: center?.toJSON() || {lat: 0, lng: 0},\n      zoom: zoom as number,\n      heading: heading as number,\n      tilt: tilt as number,\n      bounds: bounds?.toJSON() || {\n        north: 90,\n        east: 180,\n        south: -90,\n        west: -180\n      }\n    };\n\n    return camEvent;\n  } else if (mouseEventTypes.includes(type)) {\n    if (!srcEvent)\n      throw new Error('[createEvent] mouse events must provide a srcEvent');\n    const mouseEvent = ev as MapMouseEvent;\n\n    mouseEvent.domEvent = srcEvent.domEvent;\n    mouseEvent.stoppable = true;\n    mouseEvent.stop = () => srcEvent.stop();\n\n    mouseEvent.detail = {\n      latLng: srcEvent.latLng?.toJSON() || null,\n      placeId: (srcEvent as google.maps.IconMouseEvent).placeId\n    };\n\n    return mouseEvent;\n  }\n\n  return ev;\n}\n\n/**\n * maps the camelCased names of event-props to the corresponding event-types\n * used in the maps API.\n */\nconst propNameToEventType: {[prop in keyof Required<MapEventProps>]: string} = {\n  onBoundsChanged: 'bounds_changed',\n  onCenterChanged: 'center_changed',\n  onClick: 'click',\n  onContextmenu: 'contextmenu',\n  onDblclick: 'dblclick',\n  onDrag: 'drag',\n  onDragend: 'dragend',\n  onDragstart: 'dragstart',\n  onHeadingChanged: 'heading_changed',\n  onIdle: 'idle',\n  onIsFractionalZoomEnabledChanged: 'isfractionalzoomenabled_changed',\n  onMapCapabilitiesChanged: 'mapcapabilities_changed',\n  onMapTypeIdChanged: 'maptypeid_changed',\n  onMousemove: 'mousemove',\n  onMouseout: 'mouseout',\n  onMouseover: 'mouseover',\n  onProjectionChanged: 'projection_changed',\n  onRenderingTypeChanged: 'renderingtype_changed',\n  onTilesLoaded: 'tilesloaded',\n  onTiltChanged: 'tilt_changed',\n  onZoomChanged: 'zoom_changed'\n} as const;\n\nconst cameraEventTypes = [\n  'bounds_changed',\n  'center_changed',\n  'heading_changed',\n  'projection_changed',\n  'tilt_changed',\n  'zoom_changed'\n];\n\nconst mouseEventTypes = [\n  'click',\n  'contextmenu',\n  'dblclick',\n  'mousemove',\n  'mouseout',\n  'mouseover'\n];\n\ntype MapEventPropName = keyof MapEventProps;\nconst eventPropNames = Object.keys(propNameToEventType) as MapEventPropName[];\n\nexport type MapEvent<T = unknown> = {\n  type: string;\n  map: google.maps.Map;\n  detail: T;\n\n  stoppable: boolean;\n  stop: () => void;\n  domEvent?: MouseEvent | TouchEvent | PointerEvent | KeyboardEvent | Event;\n};\n\nexport type MapMouseEvent = MapEvent<{\n  latLng: google.maps.LatLngLiteral | null;\n  placeId: string | null;\n}>;\n\nexport type MapCameraChangedEvent = MapEvent<{\n  center: google.maps.LatLngLiteral;\n  bounds: google.maps.LatLngBoundsLiteral;\n  zoom: number;\n  heading: number;\n  tilt: number;\n}>;\n","export function isLatLngLiteral(\n  obj: unknown\n): obj is google.maps.LatLngLiteral {\n  if (!obj || typeof obj !== 'object') return false;\n  if (!('lat' in obj && 'lng' in obj)) return false;\n\n  return Number.isFinite(obj.lat) && Number.isFinite(obj.lng);\n}\n\nexport function latLngEquals(\n  a: google.maps.LatLngLiteral | google.maps.LatLng | undefined | null,\n  b: google.maps.LatLngLiteral | google.maps.LatLng | undefined | null\n): boolean {\n  if (!a || !b) return false;\n  const A = toLatLngLiteral(a);\n  const B = toLatLngLiteral(b);\n  if (A.lat !== B.lat || A.lng !== B.lng) return false;\n  return true;\n}\n\nexport function toLatLngLiteral(\n  obj: google.maps.LatLngLiteral | google.maps.LatLng\n): google.maps.LatLngLiteral {\n  return {\n    lat: typeof obj.lat === 'function' ? obj.lat() : obj.lat,\n    lng: typeof obj.lng === 'function' ? obj.lng() : obj.lng\n  };\n}\n","import {useEffect, useLayoutEffect} from 'react';\nimport {MapProps} from '@vis.gl/react-google-maps';\nimport {InternalCameraStateRef} from './use-internal-camera-state';\nimport {isLatLngLiteral} from '../../libraries/lat-lng-utils';\n\n/**\n * Internal hook to update the map-options and camera parameters when\n * props are changed.\n *\n * @param map the map instance\n * @param cameraStateRef stores the last values seen during dispatch into the\n * react-application in useMapEvents(). We can safely assume that we\n * don't need to feed these values back into the map.\n * @param mapProps the props to update the map-instance with\n * @internal\n */\nexport function useMapOptions(\n  map: google.maps.Map | null,\n  cameraStateRef: InternalCameraStateRef,\n  mapProps: MapProps\n) {\n  const {center: rawCenter, zoom, heading, tilt, ...mapOptions} = mapProps;\n  const center = rawCenter\n    ? isLatLngLiteral(rawCenter)\n      ? rawCenter\n      : rawCenter.toJSON()\n    : null;\n  const lat = center && center.lat;\n  const lng = center && center.lng;\n\n  /* eslint-disable react-hooks/exhaustive-deps --\n   *\n   * The following effects aren't triggered when the map is changed.\n   * In that case, the values will be or have been passed to the map\n   * constructor as mapOptions.\n   */\n\n  // update the map options when mapOptions is changed\n  // Note: due to the destructuring above, mapOptions will be seen as changed\n  //   with every re-render, so we're boldly assuming the maps-api will properly\n  //   deal with unchanged option-values passed into setOptions.\n  useEffect(() => {\n    if (!map) return;\n\n    // Changing the mapId via setOptions will trigger an error-message.\n    // We will re-create the map-instance in that case anyway, so we\n    // remove it here to avoid this error-message.\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const {mapId, ...opts} = mapOptions;\n    map.setOptions(opts);\n  }, [mapOptions]);\n\n  useLayoutEffect(() => {\n    if (!map || !Number.isFinite(lat) || !Number.isFinite(lng)) return;\n    if (\n      cameraStateRef.current.center.lat === lat &&\n      cameraStateRef.current.center.lng === lng\n    )\n      return;\n\n    map.moveCamera({center: {lat: lat as number, lng: lng as number}});\n  }, [lat, lng]);\n\n  useLayoutEffect(() => {\n    if (!map || !Number.isFinite(zoom)) return;\n    if (cameraStateRef.current.zoom === zoom) return;\n\n    map.moveCamera({zoom: zoom as number});\n  }, [zoom]);\n\n  useLayoutEffect(() => {\n    if (!map || !Number.isFinite(heading)) return;\n    if (cameraStateRef.current.heading === heading) return;\n\n    map.moveCamera({heading: heading as number});\n  }, [heading]);\n\n  useLayoutEffect(() => {\n    if (!map || !Number.isFinite(tilt)) return;\n    if (cameraStateRef.current.tilt === tilt) return;\n\n    map.moveCamera({tilt: tilt as number});\n  }, [tilt]);\n  /* eslint-enable react-hooks/exhaustive-deps */\n}\n","import {useLayoutEffect} from 'react';\n\n/**\n * Internal hook that updates the camera when deck.gl viewState changes.\n * @internal\n */\nexport function useDeckGLCameraUpdate(\n  map: google.maps.Map | null,\n  viewState: Record<string, unknown> | undefined\n) {\n  useLayoutEffect(() => {\n    if (!map || !viewState) {\n      return;\n    }\n\n    // FIXME: this should probably be extracted into a seperate hook that only\n    //  runs once when first seeing a deck.gl viewState update and resets\n    //  again. Maybe even use a seperate prop (`<Map controlled />`) instead.\n    map.setOptions({\n      gestureHandling: 'none',\n      keyboardShortcuts: false,\n      disableDefaultUI: true\n    });\n\n    const {\n      latitude,\n      longitude,\n      bearing: heading,\n      pitch: tilt,\n      zoom\n    } = viewState as Record<string, number>;\n\n    map.moveCamera({\n      center: {lat: latitude, lng: longitude},\n      heading,\n      tilt,\n      zoom: zoom + 1\n    });\n  }, [map, viewState]);\n}\n","/* eslint-disable complexity */\nimport React, {\n  CSSProperties,\n  PropsWithChildren,\n  Ref,\n  useContext,\n  useEffect,\n  useMemo,\n  useState\n} from 'react';\n\nimport {APIProviderContext, APIProviderContextValue} from '../api-provider';\n\nimport {useApiIsLoaded} from '../../hooks/use-api-is-loaded';\nimport {logErrorOnce} from '../../libraries/errors';\nimport {useCallbackRef} from '../../libraries/use-callback-ref';\nimport {MapEventProps, useMapEvents} from './use-map-events';\nimport {useMapOptions} from './use-map-options';\nimport {useDeckGLCameraUpdate} from './use-deckgl-camera-update';\nimport {useInternalCameraState} from './use-internal-camera-state';\nimport {useApiLoadingStatus} from '../../hooks/use-api-loading-status';\nimport {APILoadingStatus} from '../../libraries/api-loading-status';\n\nexport interface GoogleMapsContextValue {\n  map: google.maps.Map | null;\n}\nexport const GoogleMapsContext =\n  React.createContext<GoogleMapsContextValue | null>(null);\n\nexport type {\n  MapCameraChangedEvent,\n  MapEvent,\n  MapEventProps,\n  MapMouseEvent\n} from './use-map-events';\n\n/**\n * Props for the Google Maps Map Component\n */\nexport type MapProps = google.maps.MapOptions &\n  MapEventProps & {\n    style?: CSSProperties;\n    /**\n     * Adds custom style to the map by passing a css class.\n     */\n    className?: string;\n    /**\n     * Adds initial bounds to the map as an alternative to specifying the center/zoom of the map.\n     * Calls the fitBounds method internally https://developers.google.com/maps/documentation/javascript/reference/map?hl=en#Map-Methods\n     */\n    initialBounds?: google.maps.LatLngBounds | google.maps.LatLngBoundsLiteral;\n    /**\n     * An id that is added to the map. Needed when using more than one Map component.\n     * This is also needed to reference the map inside the useMap hook.\n     */\n    id?: string;\n    /**\n     * Viewport from deck.gl\n     */\n    viewport?: unknown;\n    /**\n     * View state from deck.gl\n     */\n    viewState?: Record<string, unknown>;\n    /**\n     * Initial View State from deck.gl\n     */\n    initialViewState?: Record<string, unknown>;\n  };\n\n/**\n * Component to render a Google Maps map\n */\nexport const Map = (props: PropsWithChildren<MapProps>) => {\n  const {children, id, className, style, viewState, viewport} = props;\n\n  const context = useContext(APIProviderContext);\n  const loadingStatus = useApiLoadingStatus();\n\n  if (!context) {\n    throw new Error(\n      '<Map> can only be used inside an <ApiProvider> component.'\n    );\n  }\n\n  const [map, mapRef] = useMapInstance(props, context);\n  const cameraStateRef = useInternalCameraState();\n  useMapOptions(map, cameraStateRef, props);\n  useMapEvents(map, cameraStateRef, props);\n  useDeckGLCameraUpdate(map, viewState);\n\n  const isViewportSet = useMemo(() => Boolean(viewport), [viewport]);\n  const combinedStyle: CSSProperties = useMemo(\n    () => ({\n      width: '100%',\n      height: '100%',\n\n      // when using deckgl, the map should be sent to the back\n      zIndex: isViewportSet ? -1 : 0,\n      ...style\n    }),\n    [style, isViewportSet]\n  );\n\n  if (loadingStatus === APILoadingStatus.AUTH_FAILURE) {\n    return (\n      <div\n        style={{position: 'relative', ...(className ? {} : combinedStyle)}}\n        className={className}>\n        <AuthFailureMessage />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={mapRef}\n      data-testid={'map'}\n      style={className ? undefined : combinedStyle}\n      className={className}\n      {...(id ? {id} : {})}>\n      {map ? (\n        <GoogleMapsContext.Provider value={{map}}>\n          {children}\n        </GoogleMapsContext.Provider>\n      ) : null}\n    </div>\n  );\n};\nMap.deckGLViewProps = true;\n\nconst AuthFailureMessage = () => {\n  const style: CSSProperties = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 999,\n    display: 'flex',\n    flexFlow: 'column nowrap',\n    textAlign: 'center',\n    justifyContent: 'center',\n    fontSize: '.8rem',\n    color: 'rgba(0,0,0,0.6)',\n    background: '#dddddd',\n    padding: '1rem 1.5rem'\n  };\n\n  return (\n    <div style={style}>\n      <h2>Error: AuthFailure</h2>\n      <p>\n        A problem with your API key prevents the map from rendering correctly.\n        Please make sure the value of the <code>APIProvider.apiKey</code> prop\n        is correct. Check the error-message in the console for further details.\n      </p>\n    </div>\n  );\n};\n\n/**\n * The main hook takes care of creating map-instances and registering them in\n * the api-provider context.\n * @return a tuple of the map-instance created (or null) and the callback\n *   ref that will be used to pass the map-container into this hook.\n * @internal\n */\nfunction useMapInstance(\n  props: MapProps,\n  context: APIProviderContextValue\n): readonly [map: google.maps.Map | null, containerRef: Ref<HTMLDivElement>] {\n  const apiIsLoaded = useApiIsLoaded();\n  const [map, setMap] = useState<google.maps.Map | null>(null);\n  const [container, containerRef] = useCallbackRef<HTMLDivElement>();\n\n  const {\n    id,\n    initialBounds,\n\n    ...mapOptions\n  } = props;\n\n  // create the map instance and register it in the context\n  useEffect(\n    () => {\n      if (!container || !apiIsLoaded) return;\n\n      const {addMapInstance, removeMapInstance} = context;\n      const newMap = new google.maps.Map(container, mapOptions);\n      setMap(newMap);\n      addMapInstance(newMap, id);\n\n      if (initialBounds) {\n        newMap.fitBounds(initialBounds);\n      }\n\n      return () => {\n        if (!container || !apiIsLoaded) return;\n\n        // remove all event-listeners to minimize memory-leaks\n        google.maps.event.clearInstanceListeners(newMap);\n\n        setMap(null);\n        removeMapInstance(id);\n      };\n    },\n\n    // FIXME: we should rethink if it could be possible to keep the state\n    //   around when a map gets re-initialized (id or mapId changed). This\n    //   should keep the viewport as it is (so also no initial viewport in\n    //   this case) and any added features should of course get re-added as\n    //   well.\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [id, container, apiIsLoaded, props.mapId]\n  );\n\n  // report an error if the same map-id is used multiple times\n  useEffect(() => {\n    if (!id) return;\n\n    const {mapInstances} = context;\n\n    if (mapInstances[id] && mapInstances[id] !== map) {\n      logErrorOnce(\n        `The map id '${id}' seems to have been used multiple times. ` +\n          'This can lead to unexpected problems when accessing the maps. ' +\n          'Please use unique ids for all <Map> components.'\n      );\n    }\n  }, [id, context, map]);\n\n  return [map, containerRef] as const;\n}\n","import {useContext, useEffect} from 'react';\n\nimport {APIProviderContext} from '../components/api-provider';\nimport {useApiIsLoaded} from './use-api-is-loaded';\n\ninterface ApiLibraries {\n  core: google.maps.CoreLibrary;\n  maps: google.maps.MapsLibrary;\n  places: google.maps.PlacesLibrary;\n  geocoding: google.maps.GeocodingLibrary;\n  routes: google.maps.RoutesLibrary;\n  marker: google.maps.MarkerLibrary;\n  geometry: google.maps.GeometryLibrary;\n  elevation: google.maps.ElevationLibrary;\n  streetView: google.maps.StreetViewLibrary;\n  journeySharing: google.maps.JourneySharingLibrary;\n  drawing: google.maps.DrawingLibrary;\n  visualization: google.maps.VisualizationLibrary;\n}\n\nexport function useMapsLibrary<\n  K extends keyof ApiLibraries,\n  V extends ApiLibraries[K]\n>(name: K): V | null;\n\nexport function useMapsLibrary(name: string) {\n  const apiIsLoaded = useApiIsLoaded();\n  const ctx = useContext(APIProviderContext);\n\n  useEffect(() => {\n    if (!apiIsLoaded || !ctx) return;\n\n    // Trigger loading the libraries via our proxy-method.\n    // The returned promise is ignored, since importLibrary will update loadedLibraries\n    // list in the context, triggering a re-render.\n    void ctx.importLibrary(name);\n  }, [apiIsLoaded, ctx, name]);\n\n  return ctx?.loadedLibraries[name] || null;\n}\n","/* eslint-disable complexity */\nimport React, {\n  Children,\n  forwardRef,\n  useCallback,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useState\n} from 'react';\n\nimport {createPortal} from 'react-dom';\nimport {GoogleMapsContext} from './map';\n\nimport type {Ref, PropsWithChildren} from 'react';\nimport {useMapsLibrary} from '../hooks/use-maps-library';\n\nexport interface AdvancedMarkerContextValue {\n  marker: google.maps.marker.AdvancedMarkerElement;\n}\n\nexport const AdvancedMarkerContext =\n  React.createContext<AdvancedMarkerContextValue | null>(null);\n\ntype AdvancedMarkerEventProps = {\n  onClick?: (e: google.maps.MapMouseEvent) => void;\n  onDrag?: (e: google.maps.MapMouseEvent) => void;\n  onDragStart?: (e: google.maps.MapMouseEvent) => void;\n  onDragEnd?: (e: google.maps.MapMouseEvent) => void;\n};\n\nexport type AdvancedMarkerProps = PropsWithChildren<\n  Omit<google.maps.marker.AdvancedMarkerElementOptions, 'gmpDraggable'> &\n    AdvancedMarkerEventProps & {\n      /**\n       * className to add a class to the advanced marker element\n       * Can only be used with HTML Marker content\n       */\n      className?: string;\n      draggable?: boolean;\n    }\n>;\n\nexport type AdvancedMarkerRef = google.maps.marker.AdvancedMarkerElement | null;\nfunction useAdvancedMarker(props: AdvancedMarkerProps) {\n  const [marker, setMarker] =\n    useState<google.maps.marker.AdvancedMarkerElement | null>(null);\n  const [contentContainer, setContentContainer] =\n    useState<HTMLDivElement | null>(null);\n\n  const map = useContext(GoogleMapsContext)?.map;\n  const markerLibrary = useMapsLibrary('marker');\n\n  const {\n    children,\n    className,\n    onClick,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    collisionBehavior,\n    draggable,\n    position,\n    title,\n    zIndex\n  } = props;\n\n  const numChilds = Children.count(children);\n\n  // create marker instance and add it to the map when map becomes available\n  useEffect(() => {\n    if (!map || !markerLibrary) return;\n\n    const newMarker = new markerLibrary.AdvancedMarkerElement();\n    newMarker.map = map;\n\n    setMarker(newMarker);\n\n    // create container for marker content if there are children\n    if (numChilds > 0) {\n      const el = document.createElement('div');\n      if (className) el.className = className;\n\n      newMarker.content = el;\n\n      setContentContainer(el);\n    }\n\n    return () => {\n      newMarker.map = null;\n      setMarker(null);\n      setContentContainer(null);\n    };\n    // We do not want to re-render the whole marker when the className changes\n    // because that causes a short flickering of the marker.\n    // The className update is handled in the useEffect below.\n    // Excluding the className from the dependency array onm purpose here\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, markerLibrary, numChilds]);\n\n  // update className of advanced marker element\n  useEffect(() => {\n    if (!contentContainer) return;\n    contentContainer.className = className ?? '';\n  }, [contentContainer, className]);\n\n  // bind all marker events\n  useEffect(() => {\n    if (!marker) return;\n\n    const gme = google.maps.event;\n\n    if (onClick) gme.addListener(marker, 'click', onClick);\n    if (onDrag) gme.addListener(marker, 'drag', onDrag);\n    if (onDragStart) gme.addListener(marker, 'dragstart', onDragStart);\n    if (onDragEnd) gme.addListener(marker, 'dragend', onDragEnd);\n\n    if ((onDrag || onDragStart || onDragEnd) && !draggable) {\n      console.warn(\n        'You need to set the marker to draggable to listen to drag-events.'\n      );\n    }\n\n    const m = marker;\n    return () => {\n      gme.clearInstanceListeners(m);\n    };\n  }, [marker, draggable, onClick, onDragStart, onDrag, onDragEnd]);\n\n  // update other marker props when changed\n  useEffect(() => {\n    if (!marker) return;\n\n    if (position !== undefined) marker.position = position;\n    if (draggable !== undefined) marker.gmpDraggable = draggable;\n    if (collisionBehavior !== undefined)\n      marker.collisionBehavior = collisionBehavior;\n    if (zIndex !== undefined) marker.zIndex = zIndex;\n    if (typeof title === 'string') marker.title = title;\n  }, [marker, position, draggable, collisionBehavior, zIndex, title]);\n\n  return [marker, contentContainer] as const;\n}\n\nexport const AdvancedMarker = forwardRef(\n  (props: AdvancedMarkerProps, ref: Ref<AdvancedMarkerRef>) => {\n    const {children} = props;\n    const [marker, contentContainer] = useAdvancedMarker(props);\n\n    useImperativeHandle(ref, () => marker, [marker]);\n\n    if (!marker) {\n      return null;\n    }\n\n    return (\n      <AdvancedMarkerContext.Provider value={{marker}}>\n        {contentContainer !== null && createPortal(children, contentContainer)}\n      </AdvancedMarkerContext.Provider>\n    );\n  }\n);\n\nexport function useAdvancedMarkerRef() {\n  const [marker, setMarker] =\n    useState<google.maps.marker.AdvancedMarkerElement | null>(null);\n\n  const refCallback = useCallback((m: AdvancedMarkerRef | null) => {\n    setMarker(m);\n  }, []);\n\n  return [refCallback, marker] as const;\n}\n","/* eslint-disable complexity */\nimport React, {\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useRef,\n  useState\n} from 'react';\nimport {createPortal} from 'react-dom';\n\nimport {GoogleMapsContext} from './map';\n\n/**\n * Props for the Info Window Component\n */\nexport type InfoWindowProps = google.maps.InfoWindowOptions & {\n  onCloseClick?: () => void;\n  anchor?: google.maps.Marker | google.maps.marker.AdvancedMarkerElement | null;\n};\n\n/**\n * Component to render a Google Maps Info Window\n */\nexport const InfoWindow = (props: PropsWithChildren<InfoWindowProps>) => {\n  const {children, anchor, onCloseClick, ...infoWindowOptions} = props;\n  const map = useContext(GoogleMapsContext)?.map;\n\n  const infoWindowRef = useRef<google.maps.InfoWindow | null>(null);\n  const [contentContainer, setContentContainer] =\n    useState<HTMLDivElement | null>(null);\n\n  // create infowindow once map is available\n  useEffect(() => {\n    if (!map) return;\n\n    const newInfowindow = new google.maps.InfoWindow(infoWindowOptions);\n\n    // Add content to info window\n    const el = document.createElement('div');\n    newInfowindow.setContent(el);\n\n    infoWindowRef.current = newInfowindow;\n    setContentContainer(el);\n\n    // Cleanup info window and event listeners on unmount\n    return () => {\n      google.maps.event.clearInstanceListeners(newInfowindow);\n\n      newInfowindow.close();\n      el.remove();\n\n      setContentContainer(null);\n    };\n    // We don't want to re-render a whole new infowindow\n    // when the options change to prevent flickering.\n    // Update of infoWindow options is handled in the useEffect below.\n    // Excluding infoWindowOptions from dependency array on purpose here.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, children]);\n\n  // Update infoWindowOptions\n  useEffect(() => {\n    infoWindowRef.current?.setOptions(infoWindowOptions);\n  }, [infoWindowOptions]);\n\n  // Handle the close click callback\n  useEffect(() => {\n    if (!infoWindowRef.current) return;\n\n    let listener: google.maps.MapsEventListener | null = null;\n\n    if (onCloseClick) {\n      listener = google.maps.event.addListener(\n        infoWindowRef.current,\n        'closeclick',\n        onCloseClick\n      );\n    }\n\n    return () => {\n      if (listener) listener.remove();\n    };\n  }, [onCloseClick]);\n\n  // Open info window after content container is set\n  useEffect(() => {\n    // anchor === null means an anchor is defined but not ready yet.\n    if (!contentContainer || !infoWindowRef.current || anchor === null) return;\n\n    const openOptions: google.maps.InfoWindowOpenOptions = {map};\n\n    if (anchor) {\n      openOptions.anchor = anchor;\n    }\n\n    infoWindowRef.current.open(openOptions);\n  }, [contentContainer, infoWindowRef, anchor, map]);\n\n  return (\n    <>{contentContainer !== null && createPortal(children, contentContainer)}</>\n  );\n};\n","import {useContext} from 'react';\n\nimport {APIProviderContext} from '../components/api-provider';\nimport {GoogleMapsContext} from '../components/map';\nimport {logErrorOnce} from '../libraries/errors';\n\n/**\n * Retrieves a map-instance from the context. This is either an instance\n * identified by id or the parent map instance if no id is specified.\n * Returns null if neither can be found.\n */\nexport const useMap = (id: string | null = null): google.maps.Map | null => {\n  const ctx = useContext(APIProviderContext);\n  const {map} = useContext(GoogleMapsContext) || {};\n\n  if (ctx === null) {\n    logErrorOnce(\n      'useMap(): failed to retrieve APIProviderContext. ' +\n        'Make sure that the <APIProvider> component exists and that the ' +\n        'component you are calling `useMap()` from is a sibling of the ' +\n        '<APIProvider>.'\n    );\n\n    return null;\n  }\n\n  const {mapInstances} = ctx;\n\n  // if an id is specified, the corresponding map or null is returned\n  if (id !== null) return mapInstances[id] || null;\n\n  // otherwise, return the closest ancestor\n  if (map) return map;\n\n  // finally, return the default map instance\n  return mapInstances['default'] || null;\n};\n","import {useEffect, useMemo} from 'react';\nimport {createPortal} from 'react-dom';\nimport {useMap} from '../hooks/use-map';\n\nimport type {PropsWithChildren} from 'react';\n\ntype MapControlProps = PropsWithChildren<{\n  position: ControlPosition;\n}>;\n\n/**\n * Copy of the `google.maps.ControlPosition` constants.\n * They have to be duplicated here since we can't wait for the maps API to load to be able to use them.\n */\nexport const ControlPosition = {\n  TOP_LEFT: 1,\n  TOP_CENTER: 2,\n  TOP: 2,\n  TOP_RIGHT: 3,\n  LEFT_CENTER: 4,\n  LEFT_TOP: 5,\n  LEFT: 5,\n  LEFT_BOTTOM: 6,\n  RIGHT_TOP: 7,\n  RIGHT: 7,\n  RIGHT_CENTER: 8,\n  RIGHT_BOTTOM: 9,\n  BOTTOM_LEFT: 10,\n  BOTTOM_CENTER: 11,\n  BOTTOM: 11,\n  BOTTOM_RIGHT: 12,\n  CENTER: 13,\n  BLOCK_START_INLINE_START: 14,\n  BLOCK_START_INLINE_CENTER: 15,\n  BLOCK_START_INLINE_END: 16,\n  INLINE_START_BLOCK_CENTER: 17,\n  INLINE_START_BLOCK_START: 18,\n  INLINE_START_BLOCK_END: 19,\n  INLINE_END_BLOCK_START: 20,\n  INLINE_END_BLOCK_CENTER: 21,\n  INLINE_END_BLOCK_END: 22,\n  BLOCK_END_INLINE_START: 23,\n  BLOCK_END_INLINE_CENTER: 24,\n  BLOCK_END_INLINE_END: 25\n} as const;\nexport type ControlPosition =\n  (typeof ControlPosition)[keyof typeof ControlPosition];\n\nexport const MapControl = ({children, position}: MapControlProps) => {\n  const controlContainer = useMemo(() => document.createElement('div'), []);\n  const map = useMap();\n\n  useEffect(() => {\n    if (!map) return;\n\n    const controls = map.controls[position];\n\n    controls.push(controlContainer);\n\n    return () => {\n      const index = controls.getArray().indexOf(controlContainer);\n      controls.removeAt(index);\n    };\n  }, [controlContainer, map, position]);\n\n  return createPortal(children, controlContainer);\n};\n","/* eslint-disable complexity */\nimport React, {\n  forwardRef,\n  useCallback,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useState\n} from 'react';\n\nimport {GoogleMapsContext} from './map';\n\nimport type {Ref} from 'react';\n\ntype MarkerEventProps = {\n  onClick?: (e: google.maps.MapMouseEvent) => void;\n  onDrag?: (e: google.maps.MapMouseEvent) => void;\n  onDragStart?: (e: google.maps.MapMouseEvent) => void;\n  onDragEnd?: (e: google.maps.MapMouseEvent) => void;\n  onMouseOver?: (e: google.maps.MapMouseEvent) => void;\n  onMouseOut?: (e: google.maps.MapMouseEvent) => void;\n};\n\nexport type MarkerProps = google.maps.MarkerOptions & MarkerEventProps;\n\nexport type MarkerRef = Ref<google.maps.Marker | null>;\n\nfunction useMarker(props: MarkerProps) {\n  const [marker, setMarker] = useState<google.maps.Marker | null>(null);\n  const map = useContext(GoogleMapsContext)?.map;\n\n  const {\n    onClick,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    onMouseOver,\n    onMouseOut,\n    ...markerOptions\n  } = props;\n\n  const {position, draggable} = markerOptions;\n\n  // create marker instance and add to the map once the map is available\n  useEffect(() => {\n    if (!map) {\n      if (map === undefined)\n        console.error('<Marker> has to be inside a Map component.');\n\n      return;\n    }\n\n    const newMarker = new google.maps.Marker(markerOptions);\n    newMarker.setMap(map);\n    setMarker(newMarker);\n\n    return () => {\n      newMarker.setMap(null);\n      setMarker(null);\n    };\n    // We do not want to re-render the whole marker when the options change.\n    // Marker options update is handled in a useEffect below.\n    // Excluding markerOptions from dependency array on purpose here.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map]);\n\n  // attach and re-attach event-handlers when any of the properties change\n  useEffect(() => {\n    if (!marker) return;\n\n    const m = marker;\n\n    // Add event listeners\n    const gme = google.maps.event;\n\n    if (onClick) gme.addListener(m, 'click', onClick);\n    if (onDrag) gme.addListener(m, 'drag', onDrag);\n    if (onDragStart) gme.addListener(m, 'dragstart', onDragStart);\n    if (onDragEnd) gme.addListener(m, 'dragend', onDragEnd);\n    if (onMouseOver) gme.addListener(m, 'mouseover', onMouseOver);\n    if (onMouseOut) gme.addListener(m, 'mouseout', onMouseOut);\n\n    marker.setDraggable(Boolean(draggable));\n\n    return () => {\n      gme.clearInstanceListeners(m);\n    };\n  }, [\n    marker,\n    draggable,\n    onClick,\n    onDrag,\n    onDragStart,\n    onDragEnd,\n    onMouseOver,\n    onMouseOut\n  ]);\n\n  // update markerOptions (note the dependencies aren't properly checked\n  // here, we just assume that setOptions is smart enough to not waste a\n  // lot of time updating values that didn't change)\n  useEffect(() => {\n    if (!marker) return;\n    if (markerOptions) marker.setOptions(markerOptions);\n  }, [marker, markerOptions]);\n\n  // update position when changed\n  useEffect(() => {\n    // Should not update position when draggable\n    if (draggable || !position || !marker) return;\n\n    marker.setPosition(position);\n  }, [draggable, position, marker]);\n\n  return marker;\n}\n\n/**\n * Component to render a Google Maps Marker on a map\n */\nexport const Marker = forwardRef((props: MarkerProps, ref: MarkerRef) => {\n  const marker = useMarker(props);\n\n  useImperativeHandle(ref, () => marker, [marker]);\n\n  return <></>;\n});\n\nexport function useMarkerRef() {\n  const [marker, setMarker] = useState<google.maps.Marker | null>(null);\n\n  const refCallback = useCallback((m: google.maps.Marker | null) => {\n    setMarker(m);\n  }, []);\n\n  return [refCallback, marker] as const;\n}\n","import {\n  Children,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useMemo\n} from 'react';\nimport {AdvancedMarkerContext} from './advanced-marker';\nimport {createPortal} from 'react-dom';\nimport {logErrorOnce} from '../libraries/errors';\n\n/**\n * Props for the Pin component\n */\nexport type PinProps = google.maps.marker.PinElementOptions;\n\n/**\n * Component to render a google maps marker Pin View\n */\nexport const Pin = (props: PropsWithChildren<PinProps>) => {\n  const advancedMarker = useContext(AdvancedMarkerContext)?.marker;\n  const glyphContainer = useMemo(() => document.createElement('div'), []);\n\n  // Create Pin View instance\n  useEffect(() => {\n    if (!advancedMarker) {\n      if (advancedMarker === undefined) {\n        console.error(\n          'The <Pin> component can only be used inside <AdvancedMarker>.'\n        );\n      }\n\n      return;\n    }\n\n    if (props.glyph && props.children) {\n      logErrorOnce(\n        'The <Pin> component only uses children to render the glyph if both the glyph property and children are present.'\n      );\n    }\n\n    if (Children.count(props.children) > 1) {\n      logErrorOnce(\n        'Passing multiple children to the <Pin> component might lead to unexpected results.'\n      );\n    }\n\n    const pinViewOptions: google.maps.marker.PinElementOptions = {\n      ...props\n    };\n\n    const pinElement = new google.maps.marker.PinElement(pinViewOptions);\n\n    // Set glyph to glyph container if children are present (rendered via portal).\n    // If both props.glyph and props.children are present, props.children takes priority.\n    if (props.children) {\n      pinElement.glyph = glyphContainer;\n    }\n\n    // Set content of Advanced Marker View to the Pin View element\n    advancedMarker.content = pinElement.element;\n  }, [advancedMarker, glyphContainer, props]);\n\n  return createPortal(props.children, glyphContainer);\n};\n","import {useState, useRef, useEffect} from 'react';\n\nimport {useApiIsLoaded} from './use-api-is-loaded';\n\nexport interface AutocompleteProps {\n  inputField: HTMLInputElement | null;\n  options?: google.maps.places.AutocompleteOptions;\n  onPlaceChanged: (place: google.maps.places.PlaceResult) => void;\n}\n\n/**\n * Hook to get a Google Maps Places Autocomplete instance\n * monitoring an input field\n */\nexport const useAutocomplete = (\n  props: AutocompleteProps\n): google.maps.places.Autocomplete | null => {\n  const {inputField, options, onPlaceChanged} = props;\n\n  const googleMapsAPIIsLoaded = useApiIsLoaded();\n\n  const placeChangedHandler = useRef(onPlaceChanged);\n\n  const [autocomplete, setAutocomplete] =\n    useState<google.maps.places.Autocomplete | null>(null);\n\n  // Initializes the Google Maps Places Autocomplete\n  useEffect(() => {\n    // Wait for the Google Maps API and input element to be initialized\n    if (!googleMapsAPIIsLoaded || !inputField) return;\n\n    // FIXME: add dynamic loading for required libraries\n    if (!google.maps.places) {\n      console.error(\n        'Google Maps Places library is missing. ' +\n          'Please add the places library to the props of the <ApiProvider> ' +\n          'component.'\n      );\n\n      return;\n    }\n\n    // Create Autocomplete instance\n    const autocompleteInstance = new google.maps.places.Autocomplete(\n      inputField,\n      options\n    );\n\n    setAutocomplete(autocompleteInstance);\n\n    // Add places change listener to Autocomplete\n    autocompleteInstance.addListener('place_changed', () => {\n      const place = autocompleteInstance.getPlace();\n      if (placeChangedHandler.current) placeChangedHandler.current(place);\n    });\n\n    // Clear listeners on unmount\n    return () => {\n      if (autocompleteInstance && typeof google.maps === 'object') {\n        google.maps.event.clearInstanceListeners(autocompleteInstance);\n      }\n    };\n  }, [googleMapsAPIIsLoaded, inputField, options]);\n\n  return autocomplete;\n};\n","/**\n * A typescript assertion function used in cases where typescript has to be\n * convinced that the object in question can not be null.\n *\n * @param value\n * @param message\n */\nexport function assertNotNull<TValue>(\n  value: TValue,\n  message = 'assertion failed'\n): asserts value is NonNullable<TValue> {\n  if (value === null || value === undefined) {\n    throw Error(message);\n  }\n}\n","import {useMemo, useEffect, useCallback} from 'react';\n\nimport {useApiIsLoaded} from './use-api-is-loaded';\nimport {useMap} from './use-map';\nimport {assertNotNull} from '../libraries/assert-not-null';\n\nexport interface DirectionsServiceHookOptions {\n  mapId?: string;\n  renderOnMap?: boolean;\n  renderOptions?: google.maps.DirectionsRendererOptions;\n}\n\ninterface DirectionsServiceHookReturns {\n  directionsService: google.maps.DirectionsService | null;\n  directionsRenderer: google.maps.DirectionsRenderer | null;\n  renderRoute:\n    | ((\n        request: google.maps.DirectionsRequest\n      ) => Promise<google.maps.DirectionsResult>)\n    | null;\n  setRenderedRouteIndex: ((index: number) => void) | null;\n}\n\nconst useDirectionsRenderer = (\n  mapId: string | null,\n  renderOnMap?: boolean,\n  renderOptions?: google.maps.DirectionsRendererOptions\n) => {\n  const map = useMap(mapId);\n\n  // create the renderer instance\n  const directionsRenderer = useMemo(\n    () => {\n      if (!map || !renderOnMap) return null;\n\n      const renderer = new google.maps.DirectionsRenderer(renderOptions);\n      renderer.setMap(map);\n\n      return renderer;\n    },\n    // note: no dependency on renderOptions since those are handled in the\n    // next effect.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [map, renderOnMap]\n  );\n\n  useEffect(\n    () => {\n      if (!directionsRenderer) return;\n\n      directionsRenderer.setOptions(renderOptions || {});\n    },\n    // note: directionsRenderer dependency isn't needed since the\n    // renderOptions will be set on initialization when creating the renderer.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [renderOptions]\n  );\n\n  return directionsRenderer;\n};\n\n/**\n * Hook to get Google Maps Places Directions Service instance\n */\nexport const useDirectionsService = (\n  props: DirectionsServiceHookOptions = {}\n): DirectionsServiceHookReturns => {\n  const {mapId = null, renderOnMap, renderOptions} = props;\n  const isApiLoaded = useApiIsLoaded();\n\n  // Creates a Directions Service instance\n  const directionsService = useMemo(() => {\n    // Wait for Google Maps API to be loaded\n    if (!isApiLoaded) return null;\n\n    return new google.maps.DirectionsService();\n  }, [isApiLoaded]);\n\n  // create the renderer instance\n  const directionsRenderer = useDirectionsRenderer(\n    mapId,\n    renderOnMap,\n    renderOptions\n  );\n\n  // Custom Directions route request followed by directions rendering\n  const renderRoute = useCallback(\n    async (\n      request: google.maps.DirectionsRequest\n    ): Promise<google.maps.DirectionsResult> => {\n      // findAndRenderRoute() isn't callable when either directions\n      // service or renderer aren't ready\n      assertNotNull(directionsService);\n      assertNotNull(directionsRenderer);\n\n      const result = await directionsService.route(request);\n      directionsRenderer.setDirections(result);\n\n      return result;\n    },\n    [directionsService, directionsRenderer]\n  );\n\n  // Renders directions route of given index\n  const setRenderedRouteIndex = (index: number) => {\n    assertNotNull(directionsRenderer);\n\n    directionsRenderer.setRouteIndex(index);\n  };\n\n  return {\n    directionsService,\n    directionsRenderer,\n    renderRoute: directionsService && directionsRenderer ? renderRoute : null,\n    setRenderedRouteIndex:\n      directionsService && directionsRenderer ? setRenderedRouteIndex : null\n  };\n};\n","/* eslint-disable complexity */\nimport {useEffect, useState} from 'react';\nimport {useApiIsLoaded} from './use-api-is-loaded';\nimport {useMap} from './use-map';\n\nexport interface StreetViewPanoramaProps {\n  mapId?: string;\n  divElement?: HTMLElement | null;\n  position?: google.maps.LatLng | google.maps.LatLngLiteral;\n  pov?: google.maps.StreetViewPov;\n  zoom?: number;\n}\n\n/**\n * Hook to get Street View Panorama\n */\nexport const useStreetViewPanorama = (\n  props: StreetViewPanoramaProps = {}\n): google.maps.StreetViewPanorama | null => {\n  const {mapId, divElement, position, pov, zoom} = props;\n  const googleMapsAPIIsLoaded = useApiIsLoaded();\n  const map = useMap(mapId);\n\n  const [streetViewPanorama, setStreetViewPanorama] =\n    useState<google.maps.StreetViewPanorama | null>(null);\n\n  // Creates a Street View instance\n  useEffect(\n    () => {\n      if (!googleMapsAPIIsLoaded) return;\n\n      let pano: google.maps.StreetViewPanorama | null = null;\n      if (divElement) {\n        pano = new google.maps.StreetViewPanorama(divElement);\n      } else if (map) {\n        pano = map.getStreetView();\n      }\n\n      setStreetViewPanorama(pano);\n\n      if (!pano) return;\n      if (pov) pano.setPov(pov);\n      if (position) pano.setPosition(position);\n      if (zoom || zoom === 0) pano.setZoom(zoom);\n\n      return (): void => {\n        setStreetViewPanorama(null);\n\n        if (map) map.setStreetView(null);\n      };\n    },\n    // fixme: implement extra hook to update FOV when props change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [googleMapsAPIIsLoaded, map, divElement]\n  );\n\n  return streetViewPanorama;\n};\n","const mapLinear = (x: number, a1: number, a2: number, b1: number, b2: number) =>\n  b1 + ((x - a1) * (b2 - b1)) / (a2 - a1);\n\nconst getMapMaxTilt = (zoom: number) => {\n  if (zoom <= 10) {\n    return 30;\n  }\n  if (zoom >= 15.5) {\n    return 67.5;\n  }\n\n  // range [10...14]\n  if (zoom <= 14) {\n    return mapLinear(zoom, 10, 14, 30, 45);\n  }\n\n  // range [14...15.5]\n  return mapLinear(zoom, 14, 15.5, 45, 67.5);\n};\n\n/**\n * Function to limit the tilt range of the google maps map when updating the view state\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const limitTiltRange = ({viewState}: any) => {\n  const pitch = viewState.pitch;\n  const gmZoom = viewState.zoom + 1;\n  const maxTilt = getMapMaxTilt(gmZoom);\n\n  return {...viewState, fovy: 25, pitch: Math.min(maxTilt, pitch)};\n};\n"],"names":["APILoadingStatus","NOT_LOADED","LOADING","LOADED","FAILED","AUTH_FAILURE","_settle","pact","state","value","s","_Pact","v","o","bind","then","observer","callback","onFulfilled","onRejected","e","_this","result","_isSettledPact","thenable","MAPS_API_BASE_URL","GoogleMapsApiLoader","load","params","onLoadingStatusChange","_window$google","libraries","split","serializedParams","serializeParams","window","google","maps","importLibrary","serializedApiParams","initImportLibrary","loadingStatus","console","warn","_temp","_forOf","concat","lib","Promise","resolve","reject","key","language","region","authReferrerPolicy","solutionChannel","join","_this2","apiPromise","loadApi","library","_document$querySelect","scriptElement","document","createElement","urlParams","URLSearchParams","_i","_Object$entries","Object","entries","length","_Object$entries$_i","urlParamName","replace","t","toLowerCase","set","async","src","toString","__googleMapsCallback__","gm_authFailure","onerror","Error","nonce","querySelector","head","append","libraryName","prototype","APIProviderContext","React","createContext","useMapInstances","_useState","useState","mapInstances","setMapInstances","addMapInstance","mapInstance","id","instances","_extends2","_extends","removeMapInstance","_ref","remaining","_objectWithoutPropertiesLoose","map","_toPropertyKey","clearMapInstances","useGoogleMapsApiLoader","props","onLoad","apiKey","version","_props$libraries","otherApiParams","_excluded","_useState2","status","setStatus","_useReducer","useReducer","loadedLibraries","action","_extends3","name","addLoadedLibrary","librariesString","useMemo","JSON","stringify","useCallback","_google","res","useEffect","_temp3","_catch","_temp2","error","APIProvider","children","loaderProps","_excluded2","_useMapInstances","_useGoogleMapsApiLoad","Provider","useApiLoadingStatus","_useContext","useContext","useApiIsLoaded","shownMessages","Set","logErrorOnce","args","slice","call","arguments","has","_console","add","apply","useCallbackRef","el","setEl","ref","useInternalCameraState","useRef","center","lat","lng","heading","tilt","zoom","trackDispatchedEvent","ev","cameraStateRef","cameraEvent","detail","_cameraEvent$detail","current","useMapEvents","_loop","propName","_step","handler","eventType","propNameToEventType","listener","event","addListener","mapEvent","createMapEvent","remove","_iterator","_createForOfIteratorHelperLoose","eventPropNames","done","type","srcEvent","stoppable","stop","cameraEventTypes","includes","camEvent","getCenter","getZoom","getHeading","getTilt","bounds","getBounds","Number","isFinite","toJSON","north","east","south","west","mouseEventTypes","_srcEvent$latLng","mouseEvent","domEvent","latLng","placeId","onBoundsChanged","onCenterChanged","onClick","onContextmenu","onDblclick","onDrag","onDragend","onDragstart","onHeadingChanged","onIdle","onIsFractionalZoomEnabledChanged","onMapCapabilitiesChanged","onMapTypeIdChanged","onMousemove","onMouseout","onMouseover","onProjectionChanged","onRenderingTypeChanged","onTilesLoaded","onTiltChanged","onZoomChanged","keys","isLatLngLiteral","obj","latLngEquals","a","b","A","toLatLngLiteral","B","useMapOptions","mapProps","rawCenter","mapOptions","opts","setOptions","useLayoutEffect","moveCamera","useDeckGLCameraUpdate","viewState","gestureHandling","keyboardShortcuts","disableDefaultUI","latitude","longitude","bearing","pitch","GoogleMapsContext","Map","className","style","viewport","context","_useMapInstance","useMapInstance","mapRef","isViewportSet","Boolean","combinedStyle","width","height","zIndex","position","AuthFailureMessage","undefined","deckGLViewProps","top","left","bottom","right","display","flexFlow","textAlign","justifyContent","fontSize","color","background","padding","apiIsLoaded","setMap","_useCallbackRef","container","containerRef","initialBounds","newMap","fitBounds","clearInstanceListeners","mapId","useMapsLibrary","ctx","AdvancedMarkerContext","useAdvancedMarker","marker","setMarker","contentContainer","setContentContainer","markerLibrary","onDragStart","onDragEnd","collisionBehavior","draggable","title","numChilds","Children","count","newMarker","AdvancedMarkerElement","content","gme","m","gmpDraggable","AdvancedMarker","forwardRef","_useAdvancedMarker","useImperativeHandle","createPortal","useAdvancedMarkerRef","_useState3","refCallback","InfoWindow","anchor","onCloseClick","infoWindowOptions","infoWindowRef","newInfowindow","setContent","close","_infoWindowRef$curren","openOptions","open","Fragment","useMap","ControlPosition","TOP_LEFT","TOP_CENTER","TOP","TOP_RIGHT","LEFT_CENTER","LEFT_TOP","LEFT","LEFT_BOTTOM","RIGHT_TOP","RIGHT","RIGHT_CENTER","RIGHT_BOTTOM","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM","BOTTOM_RIGHT","CENTER","BLOCK_START_INLINE_START","BLOCK_START_INLINE_CENTER","BLOCK_START_INLINE_END","INLINE_START_BLOCK_CENTER","INLINE_START_BLOCK_START","INLINE_START_BLOCK_END","INLINE_END_BLOCK_START","INLINE_END_BLOCK_CENTER","INLINE_END_BLOCK_END","BLOCK_END_INLINE_START","BLOCK_END_INLINE_CENTER","BLOCK_END_INLINE_END","MapControl","controlContainer","controls","push","index","getArray","indexOf","removeAt","useMarker","onMouseOver","onMouseOut","markerOptions","Marker","setDraggable","setPosition","useMarkerRef","Pin","advancedMarker","glyphContainer","glyph","pinViewOptions","pinElement","PinElement","element","useAutocomplete","inputField","options","onPlaceChanged","googleMapsAPIIsLoaded","placeChangedHandler","autocomplete","setAutocomplete","places","autocompleteInstance","Autocomplete","place","getPlace","assertNotNull","message","useDirectionsRenderer","renderOnMap","renderOptions","directionsRenderer","renderer","DirectionsRenderer","useDirectionsService","_props","_props$mapId","isApiLoaded","directionsService","DirectionsService","renderRoute","request","route","setDirections","setRenderedRouteIndex","setRouteIndex","useStreetViewPanorama","divElement","pov","streetViewPanorama","setStreetViewPanorama","pano","StreetViewPanorama","getStreetView","setPov","setZoom","setStreetView","mapLinear","x","a1","a2","b1","b2","getMapMaxTilt","limitTiltRange","gmZoom","maxTilt","fovy","Math","min"],"mappings":"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"}